<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Awakening</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #0a0a0a;
            font-family: 'Times New Roman', serif;
            overflow-x: hidden;
            color: #fff;
        }

        .container {
            min-height: 1500vh;
            position: relative;
        }

        .line-section {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            perspective: 1000px;
            transition: background 0.5s ease;
        }

        .line {
            font-size: 3rem;
            text-align: center;
            opacity: 0;
            padding: 2rem;
            position: relative;
            z-index: 2;
            mix-blend-mode: difference;
            max-width: 800px;
        }

        /* Effect styles */
        .effect-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        /* Particle effects */
        .particle {
            position: absolute;
            pointer-events: none;
            border-radius: 50%;
            opacity: 0;
        }

        /* Mirror effect */
        .mirror-shard {
            position: absolute;
            background: rgba(255,255,255,0.1);
            box-shadow: 0 0 20px rgba(255,255,255,0.2);
            transform-origin: center;
        }

        /* Wave effect */
        .wave {
            position: absolute;
            width: 200%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            opacity: 0;
        }

        /* World grid */
        .world-grid {
            position: absolute;
            width: 200%;
            height: 200%;
            background: 
                linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0;
            transform: translate(-25%, -25%);
        }

        /* Paint strokes */
        .paint-stroke {
            position: absolute;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            transform-origin: left;
            opacity: 0;
        }

        /* Section transitions */
        .transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent, rgba(0,0,0,0.8));
            pointer-events: none;
            opacity: 0;
            z-index: 1;
        }

        /* Navigation */
        .next-nav {
            position: fixed;
            bottom: 40px;
            right: 40px;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s ease;
        }

        .next-nav.visible {
            opacity: 1;
            pointer-events: all;
        }

        .next-button {
            background: transparent;
            border: 2px solid rgba(255,255,255,0.2);
            color: #fff;
            font-size: 1.2rem;
            padding: 1rem 2rem;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            border-radius: 30px;
        }

        .next-button:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.05);
        }

        .progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255,255,255,0.1);
            z-index: 100;
        }

        .progress-indicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
        }

        /* Special effects */
        .flicker { animation: textFlicker 2s infinite alternate; }
        .glow { text-shadow: 0 0 20px currentColor; }
        .mirror { transform-style: preserve-3d; }

        @keyframes textFlicker {
            0%, 100% { 
                text-shadow: 
                    0 0 20px #ff6b6b,
                    0 0 40px #ff8787,
                    0 0 60px #ffa8a8;
                opacity: 1;
            }
            50% { 
                text-shadow: none;
                opacity: 0.3;
            }
        }
    </style>
</head>
<body>
    <div class="container"></div>
    <div class="transition-overlay"></div>
    
    <div class="progress-bar">
        <div class="progress-indicator"></div>
    </div>
    
    <nav class="next-nav">
        <a href="becoming.html" class="next-button">becoming â†’</a>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);

            const poem = [
                "A flicker ignites within,",
                "shadows dance in the mind,",
                "the mirror reflects a stranger,",
                "as the self begins to bloom",
                "in the chaos of change.",
                "Emotions surge like tides,",
                "heartbeats sync with dreams,",
                "the world expands and contracts,",
                "filled with the pulse of longing,",
                "a search for a place to belong.",
                "Friendships blossom,",
                "hearts break and mend,",
                "a canvas of moments",
                "painted in hues of passion,",
                "as the journey of becoming unfolds."
            ];

            // Create sections
            const container = document.querySelector('.container');
            poem.forEach((line, index) => {
                const section = document.createElement('div');
                section.className = 'line-section';
                
                const effectContainer = document.createElement('div');
                effectContainer.className = 'effect-container';
                
                const lineElement = document.createElement('div');
                lineElement.className = `line line-${index + 1}`;
                lineElement.textContent = line;
                
                section.appendChild(effectContainer);
                section.appendChild(lineElement);
                container.appendChild(section);

                // Section transition effect
                ScrollTrigger.create({
                    trigger: section,
                    start: "top center",
                    end: "bottom center",
                    onEnter: () => {
                        gsap.to('.transition-overlay', {
                            opacity: 0.5,
                            duration: 0.5,
                            ease: "power2.inOut"
                        });
                    },
                    onLeave: () => {
                        gsap.to('.transition-overlay', {
                            opacity: 0,
                            duration: 0.5,
                            ease: "power2.inOut"
                        });
                    }
                });
            });

            // Helper function for particle creation
            function createParticles(container, count, options = {}) {
                const particles = [];
                for(let i = 0; i < count; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    container.appendChild(particle);
                    particles.push(particle);
                }
                return particles;
            }

            // Line-specific animations
            document.querySelectorAll('.line-section').forEach((section, index) => {
                const line = section.querySelector('.line');
                const effectContainer = section.querySelector('.effect-container');

                // Base animation for all lines
                gsap.fromTo(line,
                    { opacity: 0, y: 50 },
                    {
                        opacity: 1,
                        y: 0,
                        duration: 1,
                        scrollTrigger: {
                            trigger: section,
                            start: "top center",
                            end: "center center",
                            scrub: 1
                        }
                    }
                );

                // Specific animations for each line
                switch(index) {
                    case 0: // Flicker
                        line.classList.add('flicker');
                        createParticles(effectContainer, 30).forEach(particle => {
                            gsap.to(particle, {
                                x: 'random(-200, 200)',
                                y: 'random(-200, 200)',
                                opacity: 'random(0.3, 0.7)',
                                duration: 'random(1, 3)',
                                repeat: -1,
                                ease: 'power1.out'
                            });
                        });
                        break;

                    case 1: // Shadows
                        for(let i = 0; i < 5; i++) {
                            const shadow = document.createElement('div');
                            shadow.className = 'mirror-shard';
                            effectContainer.appendChild(shadow);
                            
                            gsap.to(shadow, {
                                x: 'random(-100%, 100%)',
                                y: 'random(-100%, 100%)',
                                rotation: 'random(-180, 180)',
                                opacity: 'random(0.1, 0.3)',
                                duration: 'random(3, 5)',
                                repeat: -1,
                                yoyo: true,
                                ease: 'sine.inOut'
                            });
                        }
                        break;

                    case 2: // Mirror
                        for(let i = 0; i < 20; i++) {
                            const shard = document.createElement('div');
                            shard.className = 'mirror-shard';
                            effectContainer.appendChild(shard);

                            gsap.to(shard, {
                                x: 'random(-100%, 100%)',
                                y: 'random(-100%, 100%)',
                                rotation: 'random(-180, 180)',
                                opacity: 0.2,
                                duration: 2,
                                delay: i * 0.1,
                                ease: 'power2.out'
                            });
                        }
                        break;

                    case 3: // Bloom
                        createParticles(effectContainer, 40).forEach(particle => {
                            gsap.to(particle, {
                                x: 'random(-300, 300)',
                                y: 'random(-300, 300)',
                                scale: 'random(1, 3)',
                                opacity: 'random(0.3, 0.7)',
                                duration: 'random(2, 4)',
                                repeat: -1,
                                ease: 'power1.out'
                            });
                        });
                        break;

                    case 4: // Chaos
                        const letters = line.textContent.split('');
                        line.textContent = '';
                        letters.forEach(letter => {
                            const span = document.createElement('span');
                            span.textContent = letter;
                            line.appendChild(span);
                            
                            gsap.to(span, {
                                x: 'random(-50, 50)',
                                y: 'random(-50, 50)',
                                rotation: 'random(-45, 45)',
                                duration: 'random(1, 2)',
                                repeat: -1,
                                yoyo: true,
                                ease: 'none'
                            });
                        });
                        break;

                    case 5: // Emotions/Tides
                        for(let i = 0; i < 10; i++) {
                            const wave = document.createElement('div');
                            wave.className = 'wave';
                            effectContainer.appendChild(wave);
                            
                            gsap.to(wave, {
                                x: '100%',
                                opacity: 0.5,
                                duration: 3,
                                delay: i * 0.2,
                                repeat: -1,
                                ease: 'sine.inOut'
                            });
                        }
                        break;

                    case 6: // Heartbeats
                        const heart = document.createElement('div');
                        heart.className = 'particle';
                        heart.style.background = '#ff4444';
                        effectContainer.appendChild(heart);
                        
                        gsap.to(heart, {
                            scale: 2,
                            opacity: 0.7,
                            duration: 1,
                            repeat: -1,
                            yoyo: true,
                            ease: 'power1.inOut'
                        });
                        break;

                    case 7: // World expansion
                        const grid = document.createElement('div');
                        grid.className = 'world-grid';
                        effectContainer.appendChild(grid);
                        
                        gsap.to(grid, {
                            scale: 2,
                            rotation: 45,
                            opacity: 0.3,
                            duration: 3,
                            repeat: -1,
                            yoyo: true,
                            ease: 'none'
                        });
                        break;

                    case 8: // Pulse
                        createParticles(effectContainer, 20).forEach(particle => {
                            gsap.to(particle, {
                                scale: 'random(1, 4)',
                                opacity: 'random(0.2, 0.5)',
                                duration: 'random(1, 3)',
                                repeat: -1,
                                yoyo: true,
                                ease: 'sine.inOut'
                            });
                        });
                        break;

                    case 9: // Search/Belong
                        const searchLight = document.createElement('div');
                        searchLight.className = 'particle';
                        effectContainer.appendChild(searchLight);
                        
                        gsap.to(searchLight, {
                            x: 'random(-200, 200)',
                            y: 'random(-200, 200)',
                            scale: 3,
                            opacity: 0.3,
                            duration: 3,
                            repeat: -1,
                            ease: 'power1.inOut'
                        });
                        break;

                    case 10: // Friendships
                        for(let i = 0; i < 15; i++) {
                            const connection = document.createElement('div');
                            connection.className = 'paint-stroke';
                            effectContainer.appendChild(connection);
                            
                            gsap.to(connection, {
                                width: '100%',
                                x: 'random(-200, 200)',
                                y: 'random(-200, 200)',
                                rotation: 'random(-45, 45)',
                                opacity: 0.5,
                                duration: 2,
                                delay: i * 0.1,
                                repeat: -1,
                                yoyo: true,
                                ease: 'power1.inOut'
                            });
                        }
                        break;

                    case 11: // Hearts break and mend
                        const numPieces = 20;
                        for(let i = 0; i < numPieces; i++) {
                            const piece = document.createElement('div');
                            piece.className = 'particle';
                            piece.style.background = '#ff4444';
                            effectContainer.appendChild(piece);
                            
                            gsap.to(piece, {
                                x: 'random(-300, 300)',
                                y: 'random(-300, 300)',
                                rotation: 'random(-180, 180)',
                                scale: 'random(0.5, 2)',
                                opacity: 'random(0.3, 0.7)',
                                duration: 3,
                                repeat: -1,
                                yoyo: true,
                                ease: 'power1.inOut'
                            });
                        }
                        break;

                    case 12: // Canvas of moments
                        const numStrokes = 30;
                        for(let i = 0; i < numStrokes; i++) {
                            const stroke = document.createElement('div');
                            stroke.className = 'paint-stroke';
                            effectContainer.appendChild(stroke);
                            
                            gsap.to(stroke, {
                                width: '200%',
                                x: 'random(-200, 200)',
                                y: 'random(-200, 200)',
                                rotation: 'random(-45, 45)',
                                opacity: 0.7,
                                duration: 'random(2, 4)',
                                delay: i * 0.1,
                                repeat: -1,
                                yoyo: true,
                                ease: 'power2.inOut'
                            });
                        }
                        break;

                    case 13: // Hues of passion
                        const colors = ['#ff6b6b', '#4ecdc4', '#a1c4fd', '#fbc2eb'];
                        colors.forEach((color, i) => {
                            const hue = document.createElement('div');
                            hue.className = 'particle';
                            hue.style.background = color;
                            hue.style.mixBlendMode = 'overlay';
                            effectContainer.appendChild(hue);
                            
                            gsap.to(hue, {
                                x: 'random(-200, 200)',
                                y: 'random(-200, 200)',
                                scale: 'random(10, 20)',
                                opacity: 0.3,
                                duration: 'random(3, 5)',
                                delay: i * 0.5,
                                repeat: -1,
                                yoyo: true,
                                ease: 'sine.inOut'
                            });
                        });
                        break;

                    case 14: // Journey unfolding
                        const paths = 15;
                        for(let i = 0; i < paths; i++) {
                            const path = document.createElement('div');
                            path.className = 'paint-stroke';
                            effectContainer.appendChild(path);
                            
                            gsap.from(path, {
                                width: 0,
                                x: -200,
                                y: i * 30 - 200,
                                opacity: 0.5,
                                duration: 3,
                                delay: i * 0.2,
                                ease: 'power2.inOut',
                                scrollTrigger: {
                                    trigger: section,
                                    start: "top center",
                                    end: "bottom center",
                                    scrub: 1
                                }
                            });
                        }
                        break;
                }
